{% extends "index.html" %}
{% block chatpane %}
<div id="chat-pane" class="w-100 h-100 flex flex-column">
    <div id="message-view" class="w-100 overflow-x-hidden">
        <message-pane id="message-pane" data-conversation-id="{{conversation.id}}">
            {% for msg in messages %}
                <message-bubble 
                    slot="existing-msgs" 
                    data-whom="{{'self' if msg.UserId==user.id else 'other'}}" 
                    class="{{'last-of-my-kind' if loop.last else ''}}"
                >
                    <span slot="message-text">{{msg.text}}</span>
                    <span slot="message-time">{{msg.sentAtPrettyTime}}</span>
                </message-bubble>
            {% endfor %}
        </message-pane>
    </div>
    <form id="post-message" method="POST" class="w-100 bg-light-green pa2 flex flex-row items-center">
        <textarea class="w-100" name="text" id="new-message" rows="1"></textarea>
        <input type="hidden" name="size" value="1">
        <input type="hidden" name="userId" value="{{user.id}}">
        <input type="hidden" name="conversationId" value="{{conversation.id}}">
        <button id="send-message-btn" type="submit" class="bn bg-transparent pointer">
            <span class="material-icons mh2">send</span>
        </button>
    </form>
</div>
{% endblock %}


